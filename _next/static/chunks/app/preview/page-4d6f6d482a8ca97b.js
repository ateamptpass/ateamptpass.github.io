(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[639],{6647:function(){},4838:function(t,e,c){Promise.resolve().then(c.bind(c,685))},685:function(t,e,c){"use strict";c.r(e),c.d(e,{default:function(){return m}});var n=c(7437),r=c(2265),o=c(3562),a=c(8883),i=c(6952),s=c(4687),l=c(305),u=c(4228);class p{async onInitialWebAuth(t,e){(0,u.lO)(t,e)}constructor(){this.initialWebAuthRequest=null,(0,l.rC)(this,{initialWebAuthRequest:l.LO})}}let d=new p;var f=()=>{var t;let e=(0,o.$)("clientId"),c=(0,o.$)("secret"),n=null!==(t=(0,o.$)("callbackUrl"))&&void 0!==t?t:"",r=(0,o.$)("scope"),a=(0,o.$)("acr")||null,i=(0,o.$)("prompt")||null,s=(0,o.$)("purpose")||null,l=(0,o.$)("environment"),u=(0,o.$)("state");d.onInitialWebAuth({client_id:e,redirect_uri:n,response_type:"code",secret:c,scope:r,state:u,acr:a,prompt:i,purpose:s},l)},m=()=>{i.featureInquireInfo.jsBridgeValue;let[t,e]=(0,r.useState)(!0),[c,l]=(0,r.useState)("");(0,o.$)("clientId"),(0,o.$)("secret"),(0,o.$)("callbackUrl");let[u,p]=(0,r.useState)(!1),[d,m]=(0,r.useState)(""),[h,w]=(0,r.useState)(""),[$,g]=(0,r.useState)(!1),[b,k]=(0,r.useState)(""),[v,x]=(0,r.useState)(!1),I=()=>{let t=(0,o.$)("flow");"mini-app"==t?(0,s.Z)():"qr"==t&&f()},S=(t,e)=>{p(!0),m("init auth error: "+t),w("Error description: "+e)},j=t=>{t.includes("error")&&x(!0),g(!0),k(t)};return(0,r.useEffect)(()=>{window.bridge={initAuthErrorCallback:S,initAuthCallbackOption:j}},[]),(0,r.useEffect)(()=>{var t;let e=(0,o.$)("clientId");(0,o.$)("secret");let c=(0,o.$)("callbackUrl"),n=(0,o.$)("scope"),r=(0,o.$)("acr"),a=(0,o.$)("prompt"),i=(0,o.$)("purpose"),s=(0,o.$)("environment"),u=(0,o.$)("state"),p=null!==(t=(0,o.$)("callback"))&&void 0!==t?t:"",d=(0,o.$)("flow");"mini-app"==d?window.JSBridge?l("window.JSBridge.initAuth?.(".concat(e,",").concat(c,",code,").concat(n,",").concat(u,",").concat(a,",").concat(i,",").concat(r,",").concat(p,")")):window.webkit&&l("window.webkit.messageHandlers.observer.postMessage({name: initAuth,clientId:".concat(e,",redirectUri:").concat(c,",responseType:code,scope:").concat(n,",state:").concat(u,",prompt:").concat(a,",purpose:").concat(i,",acrValue:").concat(r,",callbackOption:").concat(p,"})")):"qr"==d&&l("".concat(s,"/oauth2/web/auth?.(").concat(e,",").concat(c,",code,").concat(n,",").concat(u,",").concat(a,",").concat(i,",").concat(r,")"))},[]),(0,r.useEffect)(()=>{setTimeout(()=>{e(!1)},2e3)},[]),(0,n.jsx)(a.im,{children:(0,n.jsx)(a.tz,{children:t?(0,n.jsx)(a.RW,{}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a._x,{buttonprops:{marginBottom:200},onBtnBackClick:()=>{history.back()}}),u?(0,n.jsx)(a.wF,{error:d,errorDetail:h}):$?(0,n.jsx)(a.LM,{isCallbackError:v,callback:b}):(0,n.jsxs)(a.Z9,{children:[(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(a.nj,{textName:"Command",textProps:{fontWeight:"600"}}),(0,n.jsx)(a.oU,{JSbridgeValue:c})]}),(0,n.jsx)(a.r0,{textName:"เข้าสู่ระบบ PaotangID",id:"button_next",onClick:()=>{I()}})]})]})})})}},6952:function(t,e,c){"use strict";c.d(e,{featureInquireInfo:function(){return o}});var n=c(305);class r{onInquireJSBridgeInfo(t){(0,n.z)(()=>{this.jsBridgeValue=t})}constructor(){this.jsBridgeValue=null,(0,n.rC)(this,{jsBridgeValue:n.LO})}}let o=new r},4687:function(t,e,c){"use strict";var n=c(6952),r=c(3562);e.Z=()=>{let{jsBridgeValue:t}=n.featureInquireInfo,e=(0,r.$)("clientId");(0,r.$)("secret");let c=(0,r.$)("callbackUrl"),o=(0,r.$)("scope"),a=(0,r.$)("acr"),i=(0,r.$)("prompt"),s=(0,r.$)("purpose"),l=(0,r.$)("state"),u=(0,r.$)("callback");if((0,r.$)("appName"),console.log("call JSBride"),console.log(u),window.JSBridge){var p,d;null===(p=(d=window.JSBridge).initAuth)||void 0===p||p.call(d,e,c,"code",o,l,i,s,a,u)}else window.webkit&&window.webkit.messageHandlers.observer.postMessage({name:"initAuth",clientId:e,redirectUri:c,responseType:"code",scope:o,state:l,prompt:i,purpose:s,acr:a,callbackOption:u})}},3562:function(t,e,c){"use strict";c.d(e,{$:function(){return r},q:function(){return n}});let n=(t,e)=>{localStorage.setItem(t,JSON.stringify(e))},r=t=>{{let e=localStorage.getItem(t);return e?JSON.parse(e):null}}},4228:function(t,e,c){"use strict";c.d(e,{VW:function(){return o},ZO:function(){return r},lO:function(){return a}});var n=c(2126);c(9930).config();let r=async t=>{let e="".concat("https://paotang-pass-external-sit.th-service.co.in/").concat("v1/paotangpass/customer-utility/exchange-token");return await n.Z.post(e,t)},o=async t=>{let e="".concat("https://paotang-pass-external-sit.th-service.co.in/").concat("v1/paotangpass/customer-utility/get-customer-profile");return await n.Z.post(e,t)},a=async(t,e)=>{let c="".concat(e).concat("/oauth2/web/auth","?client_id=").concat(t.client_id,"&redirect_uri=").concat(t.redirect_uri,"&response_type=").concat(t.response_type,"&scope=").concat(t.scope,"&state=").concat(t.state);t.acr&&""!==t.acr.trim()&&(c+="&acr=".concat(t.acr)),t.prompt&&""!==t.prompt.trim()&&(c+="&prompt=".concat(t.prompt)),t.purpose&&""!==t.purpose.trim()&&(c+="&purpose=".concat(t.purpose)),window.open(c)}}},function(t){t.O(0,[147,218,717,190,126,12,971,23,744],function(){return t(t.s=4838)}),_N_E=t.O()}]);
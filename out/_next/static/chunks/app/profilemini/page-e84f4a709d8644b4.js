(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[191],{6647:function(){},9068:function(e,r,t){Promise.resolve().then(t.bind(t,7707))},7707:function(e,r,t){"use strict";t.r(r);var o=t(7437),s=t(2265),n=t(5430),c=t(8883),i=t(5856),a=t(4730),l=t(3562);t(9930).config();let p=(0,n.Pi)(()=>{let[e,r]=(0,s.useState)(!0),t=(0,l.$)("clientId"),n=(0,l.$)("secret"),p=(0,l.$)("callbackUrl"),[u,d]=(0,s.useState)(!1),[h,f]=(0,s.useState)(""),[g,m]=(0,s.useState)("");return(0,s.useEffect)(()=>{setTimeout(()=>{r(!1)},2e3)},[]),(0,s.useEffect)(()=>{var e,r;let t=new URLSearchParams(window.location.search),o=t.get("code"),s=t.get("state"),n=null!==(e=t.get("error"))&&void 0!==e?e:"",c=null!==(r=t.get("error_description"))&&void 0!==r?r:"";if(m("Error: "+n),f("Error description: "+c),o){let e=(0,l.$)("appName"),r=(0,l.$)("scope");a.Z.getCustomerProfile({appName:e,clientID:"174590c2-5698-49e5-b6dc-7298154d3fbd",clientSecret:"1ngPbi9oplzCKddqhXw4CrKL0KhRiIEg",code:null!=o?o:"",state:null!=s?s:"",redirectURI:"https://ptid-miniapp.ddns.net/profilemini/index.html",scope:null!=r?r:""})}else d(!0),console.log(u),console.log(h)},[]),(0,o.jsx)(c.im,{children:e?(0,o.jsx)(c.RW,{}):(0,o.jsxs)(c.tz,{children:[u?(0,o.jsx)(c.$0,{children:(0,o.jsx)(c.r3,{children:"Error Results"})}):(0,o.jsx)(c.$0,{children:(0,o.jsx)(c.r3,{children:"Profile"})}),(0,o.jsxs)("div",{style:{paddingLeft:"16px"},children:[(0,o.jsx)("b",{children:"clientID:"})," ",t]}),(0,o.jsxs)("div",{style:{paddingLeft:"16px"},children:[(0,o.jsx)("b",{children:"clientSecret:"})," ",n]}),(0,o.jsxs)("div",{style:{paddingLeft:"16px"},children:[(0,o.jsx)("b",{children:"redirectURI:"})," ",p]}),(0,o.jsxs)("div",{style:{paddingLeft:"16px"},children:[(0,o.jsx)("b",{children:"accessToken:"})," ",a.Z.exchangeTokenRes]}),a.Z.customerProfileErrorCodeResponse?(0,o.jsx)(c.wF,{error:a.Z.customerProfileErrorCodeResponse.code,errorDetail:a.Z.customerProfileErrorCodeResponse.message}):a.Z.customerProfileResponse?(0,o.jsx)(c.dk,{responseData:a.Z.customerProfileResponse}):a.Z.exchangeTokenApiError?(0,o.jsx)(c.wF,{error:"Error",errorDetail:"exchange Token Api catch"}):a.Z.customerProfileApiError?(0,o.jsx)(c.wF,{error:"Error",errorDetail:"An invalid response was received from the upstream server"}):u?(0,o.jsx)(c.wF,{error:g,errorDetail:h}):(0,o.jsx)(c.RW,{}),(0,o.jsx)(c.r0,{textName:"กลับสู่หน้าแรก",onClick:()=>{(0,i.t)("inputpage",!0),window.location.href="https://ptid-miniapp.ddns.net/"},buttonProps:{marginBottom:"10px"}})]})})});r.default=p},3562:function(e,r,t){"use strict";t.d(r,{$:function(){return s},q:function(){return o}});let o=(e,r)=>{localStorage.setItem(e,JSON.stringify(r))},s=e=>{{let r=localStorage.getItem(e);return r?JSON.parse(r):null}}},5856:function(e,r,t){"use strict";t.d(r,{G:function(){return s},t:function(){return o}});let o=(e,r)=>{sessionStorage.setItem(e,JSON.stringify(r))},s=e=>{let r=sessionStorage.getItem(e);return r?JSON.parse(r):null}},4730:function(e,r,t){"use strict";var o=t(305),s=t(4228);class n{async getCustomerProfile(e){console.log("getCustomerProfile",e),(0,s.ZO)(e).then(r=>{(0,o.z)(()=>{var t;if((null===(t=r.data)||void 0===t?void 0:t.code)!="0000")this.customerProfileErrorCodeResponse=r.data,console.log("Exchange Token Fail");else if(console.log("Exchange Token Success"),this.exchangeTokenRes=r.data.data.access_token,r.data.data.access_token){let t=null!==(n=r.data.data.access_token)&&void 0!==n?n:"";var n,c={appName:e.appName,accessToken:t};(0,s.VW)(c).then(e=>{(0,o.z)(()=>{var r;(null===(r=e.data)||void 0===r?void 0:r.code)!="0000"?(this.customerProfileErrorCodeResponse=e.data,console.log("GetCustomer Profile Fail")):(console.log("GetCustomer Profile Sucess"),this.customerProfileResponse=e.data)})}).catch(e=>{(0,o.z)(()=>{console.log("call api GetCustomer Profile error"),this.customerProfileApiError=!0})})}else console.log("call api Exchange Token error"),this.exchangeTokenApiError=!0})}).catch(e=>{(0,o.z)(()=>{console.log("call api error"),this.exchangeTokenApiError=!0})})}constructor(){this.customerProfileResponse=null,this.customerProfileErrorCodeResponse=null,this.exchangeTokenRes=null,this.customerProfileApiError=!1,this.exchangeTokenApiError=!1,(0,o.rC)(this,{customerProfileResponse:o.LO,customerProfileErrorCodeResponse:o.LO,customerProfileApiError:o.LO,exchangeTokenApiError:o.LO,exchangeTokenRes:o.LO,getCustomerProfile:o.aD})}}let c=new n;r.Z=c},4228:function(e,r,t){"use strict";t.d(r,{VW:function(){return n},ZO:function(){return s},lO:function(){return c}});var o=t(2126);t(9930).config();let s=async e=>{let r="".concat("https://paotang-pass-external-sit.th-service.co.in/").concat("v1/paotangpass/customer-utility/exchange-token");return await o.Z.post(r,e)},n=async e=>{let r="".concat("https://paotang-pass-external-sit.th-service.co.in/").concat("v1/paotangpass/customer-utility/get-customer-profile");return await o.Z.post(r,e)},c=async(e,r)=>{let t="".concat(r).concat("/oauth2/web/auth","?client_id=").concat(e.client_id,"&redirect_uri=").concat(e.redirect_uri,"&response_type=").concat(e.response_type,"&scope=").concat(e.scope,"&state=").concat(e.state);e.acr&&""!==e.acr.trim()&&(t+="&acr=".concat(e.acr)),e.prompt&&""!==e.prompt.trim()&&(t+="&prompt=".concat(e.prompt)),e.purpose&&""!==e.purpose.trim()&&(t+="&purpose=".concat(e.purpose)),window.open(t)}}},function(e){e.O(0,[147,218,717,190,126,12,971,23,744],function(){return e(e.s=9068)}),_N_E=e.O()}]);